(this["webpackJsonpclassplus-web-react"]=this["webpackJsonpclassplus-web-react"]||[]).push([[99,130],{1386:function(e,t,a){"use strict";var s=a(151),n=a(152),i=a(154),o=a(153),r=a(2),c=a.n(r),l=a(1720),m=a.n(l),u=a(140),p=a(86),d=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).rgba="".concat(parseInt(200*Math.random()),", ").concat(parseInt(200*Math.random()),", ").concat(parseInt(200*Math.random())),n}return Object(n.a)(a,[{key:"render",value:function(){var e={};return this.props.imgSrc?e.src=this.props.imgSrc:e.style={backgroundImage:"linear-gradient(rgba(".concat(this.rgba,", 1), rgba(").concat(this.rgba,", 1))")},c.a.createElement("div",{onClick:this.props.onClick?this.props.onClick:function(){},className:m.a.item+" "+(this.props.hasUnreadMsg?m.a.hasUnreadMsg:"")+" item "+this.props.className+" "+(this.props.opened?m.a.opened:"")},c.a.createElement("span",{className:m.a.redIcon,style:this.props.isHoverCursor?{cursor:"pointer"}:{}},this.props.imgSrc?c.a.createElement("img",Object.assign({className:m.a.img},e)):c.a.createElement("span",Object.assign({className:m.a.img},e)," "),!this.props.imgSrc&&c.a.createElement("span",{className:m.a.initials},this.props.name?this.props.name.charAt(0):""),!!this.props.active&&!this.props.typing&&c.a.createElement("span",{className:m.a.activeDot},"\xa0"),!!this.props.typing&&c.a.createElement("span",{className:m.a.typing},"\xa0")),this.props.children)}}]),a}(c.a.Component);t.a=Object(u.connect)((function(e){return{appState:e.appState.state}}),(function(e){return{changeState:function(){e(Object(p.d)("details"))}}}),null,{pure:!0})(d)},1721:function(e,t,a){"use strict";var s=a(2),n=a.n(s),i=a(19),o=a(24),r=a.n(o),c=a(1722),l=a.n(c),m=a(2292);t.a=n.a.memo((function(e){var t,a,o,c,u=e.datetime,p=e.className,d=e.fromList,g=Object(m.a)().t,v=i.store.getState(),h=null===v||void 0===v||null===(t=v.persistedData)||void 0===t||null===(a=t.organization)||void 0===a?void 0:a.timeFormat,f=null===v||void 0===v||null===(o=v.persistedData)||void 0===o||null===(c=o.organization)||void 0===c?void 0:c.dateTimeStamp,M=Object(s.useMemo)((function(){var e=new Date(u).getTime(),t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.getTime()<=e?d?r.a.utc(u).local().format("".concat(h||"hh:mm a")):g("Chatv2.Routes.Details.DateTime.today","TODAY"):t.setDate(t.getDate()-1)&&t.getTime()<=e?g("Chatv2.Routes.Details.DateTime.yesterday","YESTERDAY"):r.a.utc(u).format("".concat(f?null===f||void 0===f?void 0:f.toUpperCase():"YYYY/MM/DD"))}),[u,d]);return n.a.createElement("div",{className:l.a.time+" "+p},M)}))},1722:function(e,t,a){e.exports={time:"DateTime_time__2LwRn"}},1723:function(e,t,a){e.exports=a.p+"static/media/EmptyChat.a919e46f.svg"},1724:function(e,t,a){e.exports=a.p+"static/media/EmptyList2.c25defed.svg"},1778:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),i=a(1723),o=a.n(i),r=a(1724),c=a.n(r),l=a(2292);t.default=n.a.memo((function(e){var t=Object(l.a)().t,a={marginTop:"list"==e.imgType?"15rem":"0",width:"list"==e.imgType?"100%":"65%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",textAlign:"center"};return n.a.createElement("div",{style:a},n.a.createElement("img",{src:"list"==e.imgType?c.a:o.a}),n.a.createElement("div",null,n.a.createElement("div",{style:{fontSize:"18px",lineHeight:"21px",textAlign:"center",color:"#000000",marginTop:"32px"}},e.headingText?e.headingText:t("Chatv2.Routes.Blank.noConversationSelected","No conversation selected")),n.a.createElement("div",{style:{fontSize:"14px",lineHeight:"22px",textAlign:"center",color:"#777777",marginTop:"16px"}},e.subheading?e.subheading:e.user&&3==e.user.type?t("Chatv2.Routes.Blank.selectAConversation","Select a conversation from the left panel or tap the \u201c+\u201d icon to start\ta new conversation"):t("Chatv2.Routes.Blank.selectAConversation","Select a conversation from the left panel "))))}))},3383:function(e,t,a){e.exports=a.p+"static/media/fadedMuteIcon.d70114c3.svg"},3384:function(e,t,a){e.exports=a.p+"static/media/@.7620e08e.svg"},3528:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),i=a(156),o=a(2280),r=a.n(o),c=a(140),l=a(1386),m=a(1721),u=a(3383),p=a.n(u),d=a(3384),g=a.n(d),v=a(86),h=a(64),f=a(48),M=a(2822),C=a(2292);var D=Object(M.a)(Object(c.connect)((function(e){return{socketConversationId:e.conversationList.socketConversationId,typing:e.conversationList.typing||{},online:e.conversationList.online,currentConversationId:e.currentConversation._conversationId}}),(function(e){return{setConversationId:function(t){e(Object(f.u)(t))},changeState:function(t){e(Object(v.d)(t))},updateUnreadCount:function(t){e(Object(h.v)(t))}}}),null,{pure:!0})((function(e){var t=Object(C.a)().t,a=e&&e.itemDetails,o=Object(s.useMemo)((function(){switch(a.conversationType){case 1:return"Single";case 2:return 1===a.conversationSource||3===a.conversationSource?"Auto Group":"Custom Group";default:return""}}),[a.conversationType,a.conversationSource]),c=e.currentConversationId===a._conversationId,u=a.unreadMessageCount>0,d=a._conversationId===e.typing._conversationId,v=void 0!==e.online[a._conversationId]?e.online[a._conversationId]:a.isOnline;return n.a.createElement("div",{onClick:function(){localStorage.getItem("hideAll")&&window.parent.postMessage({event_id:"openStudentConvoInDIY",data:{conversationId:a._conversationId}},"*"),e.changeState("details"),a.chatType=o,e.setConversationId(a),e.history.push("/messages/details?convId="+a._conversationId),e.updateUnreadCount({type:"onClickConversation",item:a})},className:r.a.itemHolder},n.a.createElement(l.a,{imgSrc:a.conversationImage?a.conversationImage:null,name:a.conversationName,typing:d,active:v,opened:c,hasUnreadMsg:u},n.a.createElement("div",{className:r.a.senderAndMsg},n.a.createElement("div",{className:r.a.senderName},n.a.createElement("span",null,a.conversationName?a.conversationName:""),a.lastMessageDetails&&a.lastMessageDetails.lastMessageTime&&n.a.createElement("span",{className:r.a.lastActive},n.a.createElement(m.a,{fromList:!0,className:r.a.marginZero,datetime:a.lastMessageDetails.lastMessageTime}))),a.lastMessageDetails&&n.a.createElement("div",{className:r.a.msg},d?(1!==a.conversationType?e.typing.userName:"")+t("Chatv2.List.ConversationListItem.isTyping"," is typing"):n.a.createElement(n.a.Fragment,null,a.lastMessageDetails.isDeleted?n.a.createElement("div",{className:r.a.isDeleteClass},a.lastMessageDetails.lastMessageText?a.lastMessageDetails.lastMessagePreText:""," ",n.a.createElement("span",{className:r.a.isDeleteClassMargin},n.a.createElement("img",{src:"https://".concat(i.a,"-cp-assets-public.classplus.co/classplus-websites/common/static/block.svg")}),n.a.createElement("span",{className:r.a.isItalicClass},a.lastMessageDetails.lastMessageText))):n.a.createElement("div",{className:r.a.msgText,dangerouslySetInnerHTML:{__html:function(){try{return(a.lastMessageDetails.lastMessageText?a.lastMessageDetails.lastMessagePreText:" ")+decodeURI(a.lastMessageDetails.lastMessageText)}catch(e){return(a.lastMessageDetails.lastMessageText?a.lastMessageDetails.lastMessagePreText:" ")+a.lastMessageDetails.lastMessageText}}()}}),1===a.isNewRepliedMessage&&a.unreadMessageCount>0&&n.a.createElement("img",{src:g.a,alt:"atRate",style:{marginRight:"10px"}}),a.unreadMessageCount>0?n.a.createElement("div",{className:a.unreadMessageCount>10?r.a.doubleDigitUnreadCount:r.a.singleDigitUnreadCount},a.unreadMessageCount<100?n.a.createElement("span",{style:{color:"#fff"}},a.unreadMessageCount):n.a.createElement("span",{style:{color:"#fff"}},"99+")):"",a.permissions&&a.permissions.isMute?n.a.createElement("img",{alt:"mute",src:p.a,className:r.a.muteIcon}):"")))))}))),y=a(2318),E=a(1691),T=a(1778);t.default=n.a.memo((function(e){var t=e.scrollDown,a=e.conversationList,s=e.loading,i=e.totalCount,o=Object(C.a)().t;return n.a.createElement(y.a,{scrollThreshold:100,scrollDirection:"down",loadingDown:!!s,Loader:n.a.createElement(E.a,null),hasMoreDown:i>a.length,loadMoreDown:t,shouldNotHandleScroll:!0},a.length?a.map((function(e,t){return n.a.createElement(D,{itemDetails:e,key:t})})):!s&&n.a.createElement(T.default,{imgType:"list",headingText:o("Chatv2.List.ConversationList.noConvo","No conversations found"),subheading:" "}))}))}}]);